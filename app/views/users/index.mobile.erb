<%- model_class = User -%>

<div data-role="page" id="users">
  <%= render partial: "shared/header", locals: {title: model_class.model_name.human} %>
  <div data-role="content">
    <table data-role="table" id="table-column-toggle" data-mode="columntoggle" class="ui-responsive table-stroke">
      <thead>
      <tr>
        <th><%= model_class.human_attribute_name(:id) %></th>
        <th><%= model_class.human_attribute_name(:name) %></th>
        <th data-priority="1"><%= model_class.human_attribute_name(:email) %></th>
        <th data-priority="2"><%= model_class.human_attribute_name(:created_at) %></th>
        <% if current_user.admin? %>
          <th><%=t '.actions', :default => t("helpers.actions") %></th>
        <% end %>
      </tr>
      </thead>
      <tbody>
      <% @users.each do |user| %>
          <tr>
            <td><%= link_to user.id, user_path(user) %></td>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td><%=l user.created_at %></td>
            <% if current_user.admin? %>
              <td>
              <%= link_to t('.edit', :default => t("helpers.links.edit")),
                          edit_user_path(user),
                          'data-icon' => "gear",
                          'data-role' => 'button' ,
                          'data-inline' => 'true',
                          'data-mini' => 'true',
                          'data-iconpos' => 'notext'%>
              <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                          user_path(user),
                          :method => :delete,
                          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                          'data-icon' => "delete",
                          'data-role' => 'button' ,
                          'data-inline' => 'true',
                          'data-mini' => 'true',
                          'data-iconpos' => 'notext'%>
              </td>
            <% end %>
          </tr>
      <% end %>
      </tbody>
    </table>
  </div>
  <%= render partial: "shared/footer"%>
</div>
