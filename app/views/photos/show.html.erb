<% content_for :head do %>
    <%= javascript_include_tag 'custom/gallery', 'data-turbolinks-track' => true %>
    <%= stylesheet_link_tag 'custom/gallery', 'data-turbolinks-track' => true %>
<% end %>

<%= render partial: 'shared/blueimp_controls' %>

<%
  _prev = @photo.prev(@context)
  _next = @photo.next(@context)
%>

<div class="span7 text-center" id="photo-container">
  <%= link_to_photo _prev, context: @context do %>
    <div class="nav prev"><span class="glyphicon glyphicon-chevron-left"></span></div>
  <% end if _prev %>
  <%= link_to_photo _next, context: @context do %>
    <div class="nav next"><span class="glyphicon glyphicon-chevron-right"></span></div>
  <% end if _next %>
  <%= link_to image_photo_url(@photo, :original), :title => @photo.title, 'data-gallery' => '' do %>
    <%= image_tag image_photo_url(@photo, :medium), :alt => @photo.title, :id => 'main-photo' %>
    <%= link_to "#{url_for(@context)}##{photo_id(@photo)}",
                id: "return-link",
                class: "bottom-link has-tooltip",
                title: t('photos.label.return_to_context',
                context: @context.class.model_name.human),
                data: {placement: "top"} do %>
      <span class="glyphicon glyphicon-circle-arrow-left"></span>
    <% end if @context %>
  <% end %>
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-6" id="context-user">
      <div class="context-block">
        <h4><%= t 'photos.label.uploaded_at', date: l(@photo.created_at, :format => :short) %></h4>
      </div>
      <%= render partial: 'photos/context/user' %>
    </div>
    <div class="col-sm-6 ">
      <div class="context-block" id="context-albums">
        <%= render partial: 'photos/context/albums' %>
      </div>
      <div class="context-block" id="context-exif">
        <%= render partial: 'photos/context/exif' %>
      </div>
    </div>
  </div>
</div>